   {% extends 'base.html' %}
{% load static %}
{% load admin_urls %}

{% block content %}
<div class="container py-5">
  <div class="mb-4">
    <a href="{% url 'admin-dashboard' %}" class="btn btn-outline-primary rounded-pill">
      <i class="fas fa-arrow-left me-1"></i> Torna alla Dashboard
    </a>
  </div>
  <h2 class="mb-4 fw-bold text-success">Gestione Completa del Blog</h2>

  <div class="row g-4">

    <!-- ARTICOLI BLOG -->
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h4 class="text-success">ğŸ“° Articoli Blog</h4>
        <a href="{% url 'admin-articoli-blog-add' %}" class="btn btn-success rounded-pill">â• Nuovo Articolo</a>
      </div>
      <table class="table table-bordered table-striped">
        <thead class="table-success">
          <tr>
            <th>Titolo</th><th>Pubblicato</th><th>Slug</th><th>Azioni</th>
          </tr>
        </thead>
        <tbody>
          {% for articolo in articoli %}
          <tr>
            <td>{{ articolo.titolo }}</td>
            <td>{{ articolo.data_pubblicazione|date:"d/m/Y H:i" }}</td>
            <td>{{ articolo.slug }}</td>
            <td>
              <a href="{% url 'admin-articoli-blog-edit' articolo.id %}" class="btn btn-warning btn-sm">âœï¸</a>
              <a href="{% url 'admin-articoli-blog-delete' articolo.id %}" class="btn btn-danger btn-sm" onclick="return confirm('Eliminare questo articolo?');">ğŸ—‘</a>
            </td>
          </tr>
          {% empty %}<tr><td colspan="4">Nessun articolo trovato.</td></tr>{% endfor %}
        </tbody>
      </table>
    </div>

    <!-- COMMENTI BLOG -->
    <div class="col-12">
      <h4 class="text-primary">ğŸ’¬ Commenti</h4>
      <table class="table table-bordered table-striped">
        <thead class="table-primary">
          <tr>
            <th>Utente</th><th>Articolo</th><th>Testo</th><th>Emoji</th><th>Data</th><th>Azioni</th>
          </tr>
        </thead>
        <tbody>
          {% for commento in commenti %}
          <tr>
            <td>{{ commento.utente }}</td>
            <td>{{ commento.post.titolo }}</td>
            <td>{{ commento.testo|truncatechars:40 }}</td>
            <td>{{ commento.emoji }}</td>
            <td>{{ commento.data_pubblicazione|date:"d/m/Y" }}</td>
            <td>
              <a href="{% url 'elimina-commento-blog' commento.id %}" class="btn btn-danger btn-sm" onclick="return confirm('Eliminare questo commento?');">ğŸ—‘</a>
            </td>
          </tr>
          {% empty %}<tr><td colspan="6">Nessun commento.</td></tr>{% endfor %}
        </tbody>
      </table>
    </div>

    <!-- PRODOTTI SUGGERITI -->
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h4 class="text-warning">ğŸ›’ Prodotti Suggeriti</h4>
        <a href="{% url 'admin-prodotti-blog-add' %}" class="btn btn-warning rounded-pill">â• Nuovo Prodotto</a>
      </div>
      <table class="table table-bordered table-striped">
        <thead class="table-warning">
          <tr>
            <th>Titolo</th><th>Autore</th><th>Link</th><th>Azioni</th>
          </tr>
        </thead>
        <tbody>
          {% for p in prodotti %}
          <tr>
            <td>{{ p.titolo }}</td>
            <td>{{ p.autore }}</td>
            <td>
              {% if p.link %}<a href="{{ p.link }}" target="_blank">ğŸ”—</a>{% else %}Nessun link{% endif %}
            </td>
            <td>
              <a href="{% url 'admin-prodotti-blog-edit' p.id %}" class="btn btn-warning btn-sm">âœï¸</a>
              <a href="{% url 'admin-prodotti-blog-delete' p.id %}" class="btn btn-danger btn-sm" onclick="return confirm('Eliminare questo prodotto?');">ğŸ—‘</a>
            </td>
          </tr>
          {% empty %}<tr><td colspan="4">Nessun prodotto suggerito.</td></tr>{% endfor %}
        </tbody>
      </table>
    </div>

    <!-- BANNER INFORMATIVI -->
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h4 class="text-danger">ğŸ“¢ Banner Informativi</h4>
        <a href="{% url 'admin-banner-blog-add' %}" class="btn btn-danger rounded-pill">â• Nuovo Banner</a>
      </div>
      <table class="table table-bordered table-striped">
        <thead class="table-danger">
          <tr>
            <th>Titolo</th><th>Visibile</th><th>Data</th><th>Azioni</th>
          </tr>
        </thead>
        <tbody>
          {% for b in banner %}
          <tr>
            <td>{{ b.titolo }}</td>
            <td>{% if b.visibile %}âœ…{% else %}âŒ{% endif %}</td>
            <td>{{ b.data_creazione|date:"d/m/Y H:i" }}</td>
            <td>
              <a href="{% url 'admin-banner-blog-edit' b.id %}" class="btn btn-warning btn-sm">âœï¸</a>
              <a href="{% url 'admin-banner-blog-delete' b.id %}" class="btn btn-danger btn-sm" onclick="return confirm('Eliminare questo banner?');">ğŸ—‘</a>
            </td>
          </tr>
          {% empty %}<tr><td colspan="4">Nessun banner disponibile.</td></tr>{% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}

